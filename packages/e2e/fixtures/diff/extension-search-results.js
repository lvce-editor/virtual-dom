import {
  renderInto,
  applyPatch,
  VirtualDomElements,
} from '/dist/virtual-dom/dist/index.js'
import { diffTree } from '/dist/virtual-dom-worker/dist/index.js'

const $container = document.getElementById('diff-container')

const initialDom = [
  {
    ariaBusy: false,
    ariaLive: 'polite',
    childCount: 2,
    className: 'Viewlet Extensions',
    role: 'none',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionHeader',
    onContextMenu: 16,
    type: 4,
  },
  {
    childCount: 2,
    className: 'SearchField',
    role: 'none',
    type: 4,
  },
  {
    autocapitalize: 'off',
    autocomplete: 'off',
    autocorrect: 'off',
    childCount: 0,
    className: 'MultilineInputBox',
    inputType: 'search',
    name: 'extensions',
    onFocus: '',
    onInput: 4,
    placeholder: 'Search Extensions in Marketplace',
    spellcheck: false,
    type: 6,
  },
  {
    childCount: 2,
    className: 'SearchFieldButtons',
    type: 4,
  },
  {
    childCount: 1,
    className: 'SearchFieldButton SearchFieldButtonDisabled',
    onClick: 1,
    tabIndex: 0,
    title: 'Clear extension search results',
    type: 1,
  },
  {
    childCount: 0,
    className: 'MaskIcon MaskIconClearAll',
    type: 4,
  },
  {
    childCount: 1,
    className: 'SearchFieldButton',
    onClick: 2,
    tabIndex: 0,
    title: 'Filter',
    type: 1,
  },
  {
    childCount: 0,
    className: 'MaskIcon MaskIconFilter',
    type: 4,
  },
  {
    childCount: 2,
    className: 'Viewlet List',
    type: 4,
  },
  {
    ariaLabel: 'Extensions',
    childCount: 7,
    className: 'ListItems',
    onBlur: 17,
    onContextmenu: 3,
    onContextMenu: 3,
    onFocus: 5,
    onPointerDown: 7,
    onTouchEnd: 12,
    onTouchMove: 13,
    onTouchStart: 14,
    onWheel: 15,
    role: 'list',
    tabIndex: 0,
    type: 4,
  },
  {
    ariaPosInSet: 1,
    ariaRoleDescription: 'Extension',
    ariaSetSize: 59,
    childCount: 2,
    className: 'ExtensionListItem ExtensionActive',
    id: 'ExtensionActive',
    role: 'listitem',
    type: 4,
  },
  {
    childCount: 0,
    className: 'ExtensionListItemIcon',
    role: 'none',
    src: '/a0480e0/icons/theme-icon.png',
    type: 17,
  },
  {
    childCount: 3,
    className: 'ExtensionListItemDetail',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Ayu Theme',
    type: 12,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemDescription',
    type: 4,
  },
  {
    childCount: 0,
    text: 'A simple theme with bright colors and comes in three versions â€” dark, light and mirage for all day long comfortable work.',
    type: 12,
  },
  {
    childCount: 2,
    className: 'ExtensionListItemFooter',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemAuthorName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'builtin',
    type: 12,
  },
  {
    childCount: 0,
    className: 'ExtensionActions',
    type: 4,
  },
  {
    ariaPosInSet: 2,
    ariaRoleDescription: 'Extension',
    ariaSetSize: 59,
    childCount: 2,
    className: 'ExtensionListItem',
    role: 'listitem',
    type: 4,
  },
  {
    childCount: 0,
    className: 'ExtensionListItemIcon',
    role: 'none',
    src: '/a0480e0/extensions/builtin.theme-cobalt2/images/logo.png',
    type: 17,
  },
  {
    childCount: 3,
    className: 'ExtensionListItemDetail',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Cobalt 2 Theme',
    type: 12,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemDescription',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Theme based on the the Official Cobalt2 theme by Wes Bos.',
    type: 12,
  },
  {
    childCount: 2,
    className: 'ExtensionListItemFooter',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemAuthorName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'builtin',
    type: 12,
  },
  {
    childCount: 0,
    className: 'ExtensionActions',
    type: 4,
  },
  {
    ariaPosInSet: 3,
    ariaRoleDescription: 'Extension',
    ariaSetSize: 59,
    childCount: 2,
    className: 'ExtensionListItem',
    role: 'listitem',
    type: 4,
  },
  {
    childCount: 0,
    className: 'ExtensionListItemIcon',
    role: 'none',
    src: '/builtin.git/packages/extension/./icon.png',
    type: 17,
  },
  {
    childCount: 3,
    className: 'ExtensionListItemDetail',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Git',
    type: 12,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemDescription',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Git SCM Integration',
    type: 12,
  },
  {
    childCount: 2,
    className: 'ExtensionListItemFooter',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemAuthorName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'builtin',
    type: 12,
  },
  {
    childCount: 0,
    className: 'ExtensionActions',
    type: 4,
  },
  {
    ariaPosInSet: 4,
    ariaRoleDescription: 'Extension',
    ariaSetSize: 59,
    childCount: 2,
    className: 'ExtensionListItem',
    role: 'listitem',
    type: 4,
  },
  {
    childCount: 0,
    className: 'ExtensionListItemIcon',
    role: 'none',
    src: '/a0480e0/icons/theme-icon.png',
    type: 17,
  },
  {
    childCount: 3,
    className: 'ExtensionListItemDetail',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Gruvbox Theme',
    type: 12,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemDescription',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Theme based on gruvbox-material-vscode theme by sainnhe',
    type: 12,
  },
  {
    childCount: 2,
    className: 'ExtensionListItemFooter',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemAuthorName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'builtin',
    type: 12,
  },
  {
    childCount: 0,
    className: 'ExtensionActions',
    type: 4,
  },
  {
    ariaPosInSet: 5,
    ariaRoleDescription: 'Extension',
    ariaSetSize: 59,
    childCount: 2,
    className: 'ExtensionListItem',
    role: 'listitem',
    type: 4,
  },
  {
    childCount: 0,
    className: 'ExtensionListItemIcon',
    role: 'none',
    src: '/a0480e0/icons/theme-icon.png',
    type: 17,
  },
  {
    childCount: 3,
    className: 'ExtensionListItemDetail',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'High Contrast Theme',
    type: 12,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemDescription',
    type: 4,
  },
  {
    childCount: 0,
    text: 'n/a',
    type: 12,
  },
  {
    childCount: 2,
    className: 'ExtensionListItemFooter',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemAuthorName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'builtin',
    type: 12,
  },
  {
    childCount: 0,
    className: 'ExtensionActions',
    type: 4,
  },
  {
    ariaPosInSet: 6,
    ariaRoleDescription: 'Extension',
    ariaSetSize: 59,
    childCount: 2,
    className: 'ExtensionListItem',
    role: 'listitem',
    type: 4,
  },
  {
    childCount: 0,
    className: 'ExtensionListItemIcon',
    role: 'none',
    src: '/a0480e0/icons/language-icon.svg',
    type: 17,
  },
  {
    childCount: 3,
    className: 'ExtensionListItemDetail',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Language Basics Bat',
    type: 12,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemDescription',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Provides syntax highlighting and bracket matching in Windows batch files.',
    type: 12,
  },
  {
    childCount: 2,
    className: 'ExtensionListItemFooter',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemAuthorName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'builtin',
    type: 12,
  },
  {
    childCount: 0,
    className: 'ExtensionActions',
    type: 4,
  },
  {
    ariaPosInSet: 7,
    ariaRoleDescription: 'Extension',
    ariaSetSize: 59,
    childCount: 2,
    className: 'ExtensionListItem',
    role: 'listitem',
    type: 4,
  },
  {
    childCount: 0,
    className: 'ExtensionListItemIcon',
    role: 'none',
    src: '/a0480e0/icons/language-icon.svg',
    type: 17,
  },
  {
    childCount: 3,
    className: 'ExtensionListItemDetail',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Language Basics C',
    type: 12,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemDescription',
    type: 4,
  },
  {
    childCount: 0,
    text: 'Provides syntax highlighting and bracket matching in C files.',
    type: 12,
  },
  {
    childCount: 2,
    className: 'ExtensionListItemFooter',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionListItemAuthorName',
    type: 4,
  },
  {
    childCount: 0,
    text: 'builtin',
    type: 12,
  },
  {
    childCount: 0,
    className: 'ExtensionActions',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ScrollBar ScrollBarSmall',
    onPointerDown: 11,
    type: 4,
  },
  {
    childCount: 0,
    className: 'ScrollBarThumb',
    type: 4,
  },
]

renderInto($container, initialDom)

const updatedDom = [
  {
    ariaBusy: false,
    ariaLive: 'polite',
    childCount: 2,
    className: 'Viewlet Extensions',
    role: 'none',
    type: 4,
  },
  {
    childCount: 1,
    className: 'ExtensionHeader',
    onContextMenu: 16,
    type: 4,
  },
  {
    childCount: 2,
    className: 'SearchField',
    role: 'none',
    type: 4,
  },
  {
    autocapitalize: 'off',
    autocomplete: 'off',
    autocorrect: 'off',
    childCount: 0,
    className: 'MultilineInputBox',
    inputType: 'search',
    name: 'extensions',
    onFocus: '',
    onInput: 4,
    placeholder: 'Search Extensions in Marketplace',
    spellcheck: false,
    type: 6,
  },
  {
    childCount: 2,
    className: 'SearchFieldButtons',
    type: 4,
  },
  {
    childCount: 1,
    className: 'SearchFieldButton',
    onClick: 1,
    tabIndex: 0,
    title: 'Clear extension search results',
    type: 1,
  },
  {
    childCount: 0,
    className: 'MaskIcon MaskIconClearAll',
    type: 4,
  },
  {
    childCount: 1,
    className: 'SearchFieldButton',
    onClick: 2,
    tabIndex: 0,
    title: 'Filter',
    type: 1,
  },
  {
    childCount: 0,
    className: 'MaskIcon MaskIconFilter',
    type: 4,
  },
  {
    childCount: 1,
    className: 'NoExtensionsFoundMessage',
    type: 4,
  },
  {
    childCount: 0,
    text: 'No extensions found.',
    type: 12,
  },
]

const patches = diffTree(initialDom, updatedDom)
const $root = $container.firstElementChild
applyPatch($root, patches)

window.__virtualDomDiffTestComplete = true
